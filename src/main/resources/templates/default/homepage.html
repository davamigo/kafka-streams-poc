<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Homepage - Kafka Streams PoC</title>
</head>
<body>
<h1>Kafka Streams PoC</h1>
<h2>Homepage</h2>

<h3>Demo</h3>
<ul>
    <li>
        <a th:href="@{/demo}">Show demo page</a>
    </li>
</ul>

<h3>Generators</h3>
<ul>
    <li>
        <form id="orderCountForm" action="#" method="post" th:action="@{/commercial-order/create}">
            <label for="orderCount">Create random orders (1-500):</label>
            <input type="number" id="orderCount" name="orderCount" placeholder="count" value="1" min="1" max="500">
            <button type="submit">Create</button>
        </form>
    </li>
</ul>

<h3>Data in topics</h3>
<ul>
    <li>
        <a th:href="@{/commercial-order/new-orders}">Show commercial orders</a>
        (<span th:text="${topicCount['commercial-orders']}"></span>)
    </li>
    <li>
        <a th:href="@{/product}">Show products</a>
        (<span th:text="${topicCount['products']}"></span>)
    </li>
    <li>
        <a th:href="@{/member}">Show members</a>
        (<span th:text="${topicCount['members']}"></span>)
    </li>
    <br>
    <li>
        <a th:href="@{/commercial-order/converted}">Show converted commercial orders</a>
        (<span th:text="${topicCount['full-commercial-orders']}"></span>)
    </li>
    <li>
        <a th:href="@{/commercial-order/lines-split}">Show split commercial order lines</a>
        (<span th:text="${topicCount['commercial-order-lines']}"></span>)
    </li>
    <li>
        <a th:href="@{/purchase-order}">Show purchase orders</a>
        (<span th:text="${topicCount['purchase-orders']}"></span>)
    </li>
    <br>
    <li>
        <a th:href="@{/warehouse-order/line/failed}">Show failed warehouse order lines</a>
        (<span th:text="${topicCount['failed-warehouse-order-lines']}"></span>)
    </li>
</ul>

<h3>Process statuses</h3>
<ul>
    <li th:each="process : ${processesStatuses}">
        <form action="#" method="post" th:if="${process.value}" th:action="@{/process/{procid}/stop(procid=${process.key})}">
            <button type="submit">Stop</button>
            <span th:text="${process.key}"></span> is <strong>Running</strong>
        </form>
        <form action="#" method="post" th:if="${!process.value}" th:action="@{/process/{procid}/start(procid=${process.key})}">
            <button type="submit">Start</button>
            <span th:text="${process.key}"></span> is <strong>Stopped</strong>
        </form>
    </li>
    <br>
    <li>
        <form action="#" method="post" th:action="@{/process/stop}">
            <button type="submit">Stop</button>
            All processes
        </form>
    </li>
    <li>
        <form action="#" method="post" th:action="@{/process//start}">
            <button type="submit">Start</button>
            All processes
        </form>
    </li>
</ul>
</body>
</html>
